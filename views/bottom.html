{{#extend "additional_styles"}}
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.css">
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
{{/extend}}

{{#extend "additional_scripts"}}
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
{{/extend}}

<div style="margin:15px;">
	<div class="row-fluid" style="background-color:#ccf;">
		<div class="span1 offset2 ">
			<label for="lead-1">Lead 1</label>
			<div id="lead-1"></div>
		</div>

		<div class="span1">
			<label for="lead-2">Lead 2</label>
			<div id="lead-2"></div>
		</div>

		<div class="span1">
			<label for="lead-3">Lead 3</label>
			<div id="lead-3"></div>
		</div>

		<div class="span1">
			<label for="lead-4">Lead 4</label>
			<div id="lead-4"></div>
		</div>

		<div class="span1">
			<label for="lead-5">Lead 5</label>
			<div id="lead-5"></div>
		</div>

		<div class="span1">
			<label for="lead-6">Lead 6</label>
			<div id="lead-6"></div>
		</div>

		<div class="span1">
			<label for="lead-7">Lead 7</label>
			<div id="lead-7"></div>
		</div>

		<div class="span1">
			<label for="lead-8">Lead 8</label>
			<div id="lead-8"></div>
		</div>
	</div>
	
	<div class="row-fluid" style="background-color:#cfc;">
		<div class="span1 offset2 ">
			<label for="bass-1">Bass 1</label>
			<div id="bass-1"></div>
		</div>

		<div class="span1">
			<label for="bass-2">Bass 2</label>
			<div id="bass-2"></div>
		</div>

		<div class="span1">
			<label for="bass-3">Bass 3</label>
			<div id="bass-3"></div>
		</div>

		<div class="span1">
			<label for="bass-4">Bass 4</label>
			<div id="bass-4"></div>
		</div>

		<div class="span1">
			<label for="bass-5">Bass 5</label>
			<div id="bass-5"></div>
		</div>

		<div class="span1">
			<label for="bass-6">Bass 6</label>
			<div id="bass-6"></div>
		</div>

		<div class="span1">
			<label for="bass-7">Bass 7</label>
			<div id="bass-7"></div>
		</div>

		<div class="span1">
			<label for="bass-8">Bass 8</label>
			<div id="bass-8"></div>
		</div>
	</div>
</div>


{{#extend "deferred_scripts"}}
	<script>
		socket.on("init", function(data) {
		  var state = data.state;
		  var roleIndex = data.role.position;
			var roleState = state.bottoms[roleIndex];
		
			var $leadSlider1 = $('#lead-1').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[0]
			});
			var $leadSlider2 = $('#lead-2').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[1]
			});
			var $leadSlider3 = $('#lead-3').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[2]
			});
			var $leadSlider4 = $('#lead-4').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[3]
			});
			var $leadSlider5 = $('#lead-5').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[4]
			});
			var $leadSlider6 = $('#lead-6').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[5]
			});
			var $leadSlider7 = $('#lead-7').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[6]
			});
			var $leadSlider8 = $('#lead-8').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.lead[7]
			});


			var $bassSlider1 = $('#bass-1').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[0]
			});
			var $bassSlider2 = $('#bass-2').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[1]
			});
			var $bassSlider3 = $('#bass-3').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[2]
			});
			var $bassSlider4 = $('#bass-4').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[3]
			});
			var $bassSlider5 = $('#bass-5').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[4]
			});
			var $bassSlider6 = $('#bass-6').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[5]
			});
			var $bassSlider7 = $('#bass-7').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[6]
			});
			var $bassSlider8 = $('#bass-8').slider({
			  orientation: 'vertical',
			  range: 'min',
			  min: 0,
			  max: 23,
			  value: roleState.bass[7]
			});

			$leadSlider1.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider1 changed to ' + ui.value);
					roleState.lead[0] = ui.value;
					socket.emit('state.change', state);
				});

			$leadSlider2.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider2 changed to ' + ui.value);
					roleState.lead[1] = ui.value;
					socket.emit('state.change', state);
				});

			$leadSlider3.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider3 changed to ' + ui.value);
					roleState.lead[2] = ui.value;
					socket.emit('state.change', state);
				});

			$leadSlider4.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider4 changed to ' + ui.value);
					roleState.lead[3] = ui.value;
					socket.emit('state.change', state);
				});

			$leadSlider5.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider5 changed to ' + ui.value);
					roleState.lead[4] = ui.value;
					socket.emit('state.change', state);
				});

			$leadSlider6.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider6 changed to ' + ui.value);
					roleState.lead[5] = ui.value;
					socket.emit('state.change', state);
				});

			$leadSlider7.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider7 changed to ' + ui.value);
					roleState.lead[6] = ui.value;
					socket.emit('state.change', state);
				});

			$leadSlider8.on(
				"slidechange", function( event, ui ) {
					console.log('leadSlider8 changed to ' + ui.value);
					roleState.lead[7] = ui.value;
					socket.emit('state.change', state);
				});



			$bassSlider1.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider1 changed to ' + ui.value);
					roleState.bass[0] = ui.value;
					socket.emit('state.change', state);
				});

			$bassSlider2.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider2 changed to ' + ui.value);
					roleState.bass[1] = ui.value;
					socket.emit('state.change', state);
				});

			$bassSlider3.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider3 changed to ' + ui.value);
					roleState.bass[2] = ui.value;
					socket.emit('state.change', state);
				});

			$bassSlider4.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider4 changed to ' + ui.value);
					roleState.bass[3] = ui.value;
					socket.emit('state.change', state);
				});

			$bassSlider5.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider5 changed to ' + ui.value);
					roleState.bass[4] = ui.value;
					socket.emit('state.change', state);
				});

			$bassSlider6.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider6 changed to ' + ui.value);
					roleState.bass[5] = ui.value;
					socket.emit('state.change', state);
				});

			$bassSlider7.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider7 changed to ' + ui.value);
					roleState.bass[6] = ui.value;
					socket.emit('state.change', state);
				});

			$bassSlider8.on(
				"slidechange", function( event, ui ) {
					console.log('bassSlider8 changed to ' + ui.value);
					roleState.bass[7] = ui.value;
					socket.emit('state.change', state);
				});
		});
		
		socket.on('state.change', function(data) {
			state = data;
			console.log('state change received');
		})


	</script>
{{/extend}}